<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title></title>
  <link href="/css/layui.css" rel="stylesheet" />
</head>

<body>
  <div class="layui-form layui-form-pane1" action="" lay-filter="first">
    <div class="layui-form-item">
      <label class="layui-form-label"></label>
      <div class="layui-input-inline">
        <input type="hidden" name="userId" id="userId">
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">原密码</label>
      <div class="layui-input-inline">
        <input type="password" id="OldPwd" lay-verify="required" name="OldPwd" autocomplete="off" class="layui-input">
      </div>
      <div class="layui-form-mid layui-word-aux">*</div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">新密码</label>
      <div class="layui-input-inline">
        <input type="password" id="NewPwd" lay-verify="required" name="NewPwd" autocomplete="off" class="layui-input">
      </div>
      <div class="layui-form-mid layui-word-aux">*</div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">确认密码</label>
      <div class="layui-input-inline">
        <input type="password" id="ConfimPwd" lay-verify="required" name="ConfimPwd" autocomplete="off" class="layui-input">
      </div>
      <div class="layui-form-mid layui-word-aux">*</div>
    </div>
    <div class="layui-form-item">
      <div class="layui-input-block">
        <button class="layui-btn" lay-submit lay-filter="sub">立即提交</button>
        <button onclick="parent.layer.closeAll()" class="layui-btn layui-btn-primary">关闭</button>
      </div>
    </div>
  </div>
  <script src="/layui.js"></script>
  <script src="/common.js"></script>
  <script type="text/javascript">
    var userUpdatePwd = {  
      saveUserPwd: function () {
        var $=global.$;
        var oldPwd=$("#OldPwd").val();
        var newPwd=$("#NewPwd").val();
        var confimPwd=$("#ConfimPwd").val();
        if(newPwd!=confimPwd){
          layer.msg("新密码跟确认密码不一致", { icon: 7 });
          return;
        }
        var data = { UserPwd:newPwd, UserOldPwd: oldPwd };
        saveDataWay(JSON.stringify(data), '/Users/UpdatePwd');
        return false;
      },
    }
    
    layui.use(["form", "config", 'laytpl'], function () {
      var form = layui.form,
        layer = layui.layer,
        $ = layui.$,
        config = layui.config;

      initJs(layui);
 
      form.on("submit(sub)", function (obj) {
        userUpdatePwd.saveUserPwd();
      })
    })
  </script>
</body>

</html>