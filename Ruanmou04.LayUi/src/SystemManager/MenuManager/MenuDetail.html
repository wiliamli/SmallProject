<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title></title>
  <link href="/css/layui.css" rel="stylesheet" />
</head>

<body>
  <div class="layui-form layui-form-pane1" action="" lay-filter="first">
    <div class="layui-form-item">
      <label class="layui-form-label"></label>
      <div class="layui-input-inline">
        <input type="hidden" name="Id">
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">名称</label>
      <div class="layui-input-inline">
        <input type="text" name="Text" lay-verify="required" placeholder="请输入名称" autocomplete="off" class="layui-input">
      </div>
      <div class="layui-form-mid layui-word-aux">请务必填写名称</div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">Url地址</label>
      <div class="layui-input-inline">
        <input type="text" name="Url" lay-verify="required" style="width:400px;" placeholder="请输入Url地址" autocomplete="off" class="layui-input">
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">菜单层级</label>
      <div class="layui-input-inline">
        <input type="text" name="MenuLevel" lay-verify="required|number" placeholder="请输入菜单层级" autocomplete="off" class="layui-input">
      </div>
      <div class="layui-form-mid layui-word-aux">请务必填写菜单层级</div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">图标</label>
      <div class="layui-input-inline">
        <input type="text" name="MenuIcon" placeholder="请输入图标" autocomplete="off" class="layui-input">
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">排序</label>
      <div class="layui-input-inline">
        <input type="text" name="Sort" lay-verify="number" placeholder="请输入排序" autocomplete="off" class="layui-input">
      </div>
    </div>
    <div class="layui-form-item" pane>
      <label class="layui-form-label">状态</label>
      <div class="layui-input-block">
        <input type="radio" name="Status" value="1" title="是" checked>
        <input type="radio" name="Status" value="0" title="否">
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">备注</label>
      <div class="layui-input-inline">
        <input type="text" name="Description" placeholder="请输入备注" autocomplete="off" style="width:400px;" class="layui-input">
      </div>
    </div>
    <div class="layui-form-item">
      <div class="layui-input-block">
        <button class="layui-btn" lay-submit lay-filter="sub">立即提交</button>
        <button onclick="parent.layer.closeAll()" class="layui-btn layui-btn-primary">关闭</button>
      </div>
    </div>
  </div>
  <script src="/layui.js"></script>
  <script src="/common.js"></script>
  <script type="text/javascript">
    var menuDetail = {
      menuInit: function () {
        debugger
        if (parent.layer.data) {
          var url = "/Menu/GetEditMenuByID?menuId=" + parent.layer.data;//取的是layer.open的data的值
          initData(url);
        }
      },

      saveMenu: function (saveData) {
        var menu = saveData;
        menu.Id = saveData.Id ? parseInt(saveData.Id) : 0;
        menu.MenuLevel = parseInt(saveData.MenuLevel);
        menu.Sort = parseInt(saveData.Sort);
        menu.Status = saveData.Status == "1";
        var data = JSON.stringify(menu);
        saveDataWay(data, '/Menu/SaveData');
        return false;
      }
    }

    layui.use(["form", "config"], function () {
      var form = layui.form;

      initJs(layui);
      menuDetail.menuInit();
      form.on("submit(sub)", function (obj) {
        menuDetail.saveMenu(obj.field);
      })
    })
  </script>
</body>

</html>